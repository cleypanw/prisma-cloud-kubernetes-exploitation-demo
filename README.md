# Kubernetes Exploitation Demo 



### Objectives

This repository provides a laboratory for demonstrating the risk of a vulnerable application combined with overly permissive access deployed on a Kubernetes cluster.

In the ever-evolving landscape of digital infrastructure, Kubernetes stands tall as a cornerstone of modern application deployment. 
However, with great power comes great responsibility, and the perils of overly permissive access can cast a shadow over this powerful tool.



#### Requirements

- a Kubernetes cluster (Vanilla or managed) : you can use the following link to deploy an EKS cluster: https://github.com/cleypanw/terraform-aws-eks
- Fork this repository
- 



## Roll out Demo

### 1 - Deploy vul-app on k8s cluster

1. Fork this repo, Go to **vul-app/k8s** and deploy app with yaml file

```shell
$ kubectl apply -f deploy-vul-app.yaml
serviceaccount/secret-sa created
clusterrolebinding.rbac.authorization.k8s.io/pod-sa-clusterrolebinding created
clusterrole.rbac.authorization.k8s.io/secret-role created
replicationcontroller/vul-app created
service/vul-app-svc created
```

2. Check that the application is running and accessible 

```shell
$ kubectl get all
NAME                READY   STATUS    RESTARTS   AGE
pod/vul-app-nhmzh   1/1     Running   0          58s

NAME                            DESIRED   CURRENT   READY   AGE
replicationcontroller/vul-app   1         1         1       58s

NAME                  TYPE           CLUSTER-IP       EXTERNAL-IP                                                               PORT(S)        AGE
service/kubernetes    ClusterIP      172.20.0.1       <none>                                                                    443/TCP        20d
service/vul-app-svc   LoadBalancer   172.20.181.148   a35ffdf61921e47299c905d536881c8c-1546501490.eu-west-3.elb.amazonaws.com   80:30399/TCP   58s
```

3. Open your browser and go to the LoadBalancer URL as shown in the output above.

![Vul-App](images/vul-app-http.jpg)



The application is running and accessible. 
Let's start the attack.



